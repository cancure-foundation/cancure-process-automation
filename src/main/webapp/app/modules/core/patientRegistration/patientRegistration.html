<div class="patientRegistrationFamily">
    <div class="content-header">
        <h1>
        Patient Registration
    </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Patient Registration</li>
        </ol>
    </div>
    <!-- Main content -->
    <div class="content">
        <form data-ng-submit="vm.submitForm();" name="vm.patientRegisterForm">
            <div>
                <md-button class="md-raised md-primary" type="submit">Register <i class="fa fa-angle-double-right"></i></md-button>
                <md-button class="md-raised" type="reset">Clear <i class="fa fa-trash-o"></i></md-button>
            </div>
            <br>
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            Patient details
                        </div>
                        <div class="panel-body">
                            <md-content class="autoScroll" style="overflow:hidden">
                                <div class="row">
                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block">
                                            <label>Name</label>
                                            <md-icon class="fa fa-user"></md-icon>
                                            <input type="text" name="name" data-ng-model="vm.formData.name" ng-required="true" maxlength="100" />
                                        </md-input-container>

                                        <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                            <md-icon class="fa fa-chevron-right"></md-icon>
                                            <select  data-ng-model="vm.formData.gender" ng-options="item.value as item.value for item in vm.Gender" ng-required="true">
                                                <option value="">Select Gender</option>
                                            </select>
                                        </md-input-container>

                                        <md-input-container class="md-icon-float md-block">
                                            <md-icon class="fa fa-briefcase"></md-icon>
                                            <select data-ng-model="vm.formData.employmentStatus" ng-options="item.value as item.value for item in vm.EmploymentStatus" required>
                                                <option value="">Select Employment status</option>
                                            </select>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block">
                                            <label>Date of Birth</label>
                                            <md-icon class="fa fa-calendar"></md-icon>
                                            <input type="date" data-ng-model="vm.formData.dob" ng-required="true">
                                        </md-input-container>

                                        <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                            <md-icon class="fa fa-plus"></md-icon>
                                            <select data-ng-model="vm.formData.bloodGroup" ng-options="item.value as item.value for item in vm.BloodGroups" ng-required="true">
                                                <option value="">Select Blood Group</option>
                                            </select>
                                        </md-input-container>

                                        <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                            <md-icon class="fa fa-plus"></md-icon>
                                            <select data-ng-model="vm.formData.maritalStatus" ng-required="true" ng-options="item.value as item.value for item in vm.MaritalStatus">
                                                <option value="">Select Marital Status</option>
                                            </select>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-4 col-sm-12">
                                        <div class="profile-image">
                                            <div class="title">
                                                <span>Profile Image</span>
                                                <i class="fa fa-times" ng-click="vm.removeProfileImg()" ng-show="vm.formData.profilePicSrc"></i>
                                                <i class="fa fa-refresh" ng-click="vm.showFileDialog()" ng-show="vm.formData.profilePicSrc"></i>
                                            </div>
                                            <div class="select-div" ng-click="vm.showFileDialog()" ng-hide="vm.formData.profilePicSrc">Click to Select Image</div>
                                            <div class="img-container">
                                                <img ng-src="{{vm.formData.profilePicSrc}}" ng-show="vm.formData.profilePicSrc" />
                                            </div>
                                            <input id="patientProfilePic_reg" type='file' onchange="angular.element(this).scope().vm.profileImageChange(this);" style="display: none;" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block">
                                            <label>Contact No.</label>
                                            <md-icon class="fa fa-phone"></md-icon>
                                            <input type="number" data-ng-model="vm.formData.contact" ng-required="true" maxlength="20" />
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block">
                                            <label>Address for Communication</label>
                                            <md-icon class="fa fa-home"></md-icon>
                                            <input type="text" name="address" data-ng-model="vm.formData.address" ng-required="true" maxlength="250">
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block">
                                            <md-icon class="fa fa-chevron-right"></md-icon>
                                            <select data-ng-model="vm.formData.typeOfSupport" ng-options="item.value as item.value for item in vm.TypeOfSupportSought" required>
                                                <option value="">Type of Support from Cancure</option>
                                            </select>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block" style="margin-bottom:0px">
                                            <label>Assets Owned</label>
                                            <md-icon class="fa fa-briefcase"></md-icon>
                                            <input type="text" name="assetsOwned" data-ng-model="vm.formData.assetsOwned" maxlength="150">
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-4 col-sm-12">
                                        <md-input-container class="md-icon-float md-block">
                                            <md-checkbox data-ng-model="vm.formData.solebreadwinner">
                                                Is the patient the sole bread winner of the family
                                            </md-checkbox>
                                        </md-input-container>
                                    </div>
                                </div>
                            </md-content>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row patientRegistrationFamily">
                <div class="col-md-12">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            Family details
                            <i class="fa fa-plus-square" aria-hidden="true" ng-click="vm.formData.familyDetails.push({});"></i>
                            <i class="fa fa-minus-square" aria-hidden="true" ng-click="vm.formData.familyDetails.pop();"></i>
                        </div>
                        <div class="clearfix">
                            <div style="padding: 0px 15px 0px 8px;" ng-if="vm.formData.familyDetails.length == 0">No family member added.</div>
                            <div class="col-sm-12 col-md-4 repeatingDiv" ng-repeat="fd in vm.formData.familyDetails">
                                <md-content class="autoScroll">
                                    <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                        <md-icon class="fa fa-users"></md-icon>
                                        <md-select data-ng-model="fd.relation" placeholder="Relation to patient" ng-required="true">
                                            <md-option ng-repeat="item in vm.FamilyRelation" value="{{item.value}}">{{item.value}}</md-option>
                                        </md-select>
                                    </md-input-container>
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Age</label>
                                        <md-icon class="fa fa-user"></md-icon>
                                        <input type="text" name="patientFamilyAge" data-ng-model="fd.age" maxlength="3">
                                    </md-input-container>
                                    <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                        <md-icon class="fa fa-user"></md-icon>
                                        <md-select data-ng-model="fd.status" placeholder="Employment status">
                                            <md-option ng-repeat="item in vm.EmploymentStatus" value="{{item.value}}">{{item.value}}</md-option>
                                        </md-select>
                                    </md-input-container>
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Monthly Income</label>
                                        <md-icon class="fa fa-money"></md-icon>
                                        <input type="text" name="patientFamilyIncome" data-ng-model="fd.income" maxlength="10" />
                                    </md-input-container>
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Other Income</label>
                                        <md-icon class="fa fa-money"></md-icon>
                                        <input type="text" name="patientFamilyOtherIncome" data-ng-model="fd.otherIncome" maxlength="10" />
                                    </md-input-container>
                                    <md-content>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row diagDetails">
                <div class="col-md-12">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            Diagnosis details
                        </div>
                        <div class="clearfix">
                            <div class="col-sm-12 col-md-4">
                                <md-input-container class="md-icon-float md-block">
                                    <label>Hospital Name</label>
                                    <md-icon class="fa fa-plus"></md-icon>
                                    <input type="text" name="hospital" data-ng-model="vm.formData.hospital" maxlength="100" />
                                </md-input-container>
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <md-input-container class="md-icon-float md-block">
                                    <label>Doctor's Name</label>
                                    <md-icon class="fa fa-user"></md-icon>
                                    <input type="text" name="doctorName" data-ng-model="vm.formData.doctorName" maxlength="100" />
                                </md-input-container>
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <md-input-container class="md-icon-float md-block">
                                    <label>Diagnosis</label>
                                    <md-icon class="fa fa-search"></md-icon>
                                    <input type="text" name="diagnosis" data-ng-model="vm.formData.diagnosis" maxlength="100" />
                                </md-input-container>
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <fieldset>
                                    <legend>Doctor's comments</legend>
                                    <textarea rows="5" cols="5" data-ng-model="vm.formData.doctorComments" maxlength="500"></textarea>
                                </fieldset>
                            </div>
                            <div class="col-sm-12 col-md-4 file-upload">
                                <div class="title">Upload Diagnosis Records</div>
                                <div class="sub-title">(use <kbd>ctrl</kbd> or <kbd>shift</kbd> to select multiple files)</div>
                                <input id="patientReg-dianosis" type="file" multiple="multiple" onchange="angular.element(this).scope().vm.diagnosisFilesSelection(this)">
                                <div class="file-names" ng-show="vm.formData.diagnosisFilesNames.length > 0">
                                    <span ng-repeat="item in vm.formData.diagnosisFilesNames">
                               			{{item}} {{$last ? '' :  ', '}}
                               		</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-sm-12">
                    <div class="panel panel-danger" style="height: 380px;">
                        <div class="panel-heading">
                            Bystander details
                        </div>
                        <div class="panel-body">
                            <md-content>
                                <md-input-container class="md-icon-float md-block">
                                    <label>Bystander Name</label>
                                    <md-icon class="fa fa-user"></md-icon>
                                    <input type="text" name="bystanderName" data-ng-model="vm.formData.bystanderName" maxlength="100">
                                </md-input-container>
                                <md-input-container class="md-icon-float md-block">
                                    <label>Bystander Contact</label>
                                    <md-icon class="fa fa-user"></md-icon>
                                    <input type="number" name="bystanderContact" data-ng-model="vm.formData.bystanderContact" maxlength="20">
                                </md-input-container>
                                <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                    <label>Bystander Relation</label>
                                    <md-icon class="fa fa-user"></md-icon>
                                    <md-select data-ng-model="vm.formData.bystanderRelation" name="gender" ng-required="true">
                                        <md-option ng-repeat="item in vm.FamilyRelation" value="{{item.value}}">{{item.value}}</md-option>
                                    </md-select>
                                </md-input-container>
                            </md-content>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="panel panel-danger" style="height: 380px;">
                        <div class="panel-heading">
                            Other details
                        </div>
                        <div class="panel-body">
                            <md-content class="autoScroll">
                                <md-input-container class="md-icon-float md-block" style="padding-bottom: 26px;">
                                    <md-icon class="fa fa-user"></md-icon>
                                    <md-select data-ng-model="vm.formData.knowAboutCancure" placeholder="How did you know about Cancure">
                                        <md-option ng-repeat="item in vm.KnowAboutCancure" value="{{item.value}}">{{item.value}}</md-option>
                                    </md-select>
                                </md-input-container>
                                <md-input-container class="md-icon-float md-block">
                                    <label>Recommendated by</label>
                                    <md-icon class="fa fa-user"></md-icon>
                                    <input type="text" name="recommendationName" data-ng-model="vm.formData.recommendationName" maxlength="100" />
                                </md-input-container>
                                <md-input-container class="md-icon-float md-block">
                                    <md-icon class="fa fa-user"></md-icon>
                                    <md-select data-ng-model="vm.formData.recommendationType" placeholder="Recommendation type">
                                        <md-option ng-repeat="item in vm.RecommendationType" value="{{item.value}}">{{item.value}}</md-option>
                                    </md-select>
                                </md-input-container>
                            </md-content>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12 supportingDocs">
                    <div class="panel panel-danger" style="height: 380px;">
                        <div class="panel-heading">
                            Supporting docs
                        </div>
                        <div class="panel-body">
                            <md-content class="autoScroll">
                                <fieldset>
                                    <legend>Identity, Address and Age Proof</legend>
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Document Category</label>
                                        <md-select data-ng-model="vm.formData.ageProof">
                                            <md-option ng-repeat="item in vm.IDProof" value="{{item.value}}">{{item.value}}</md-option>
                                        </md-select>
                                    </md-input-container>
                                    <input id="patientReg-ageProof" type="file" aria-label="ageProof" ng-disabled="!vm.formData.ageProof" onchange="angular.element(this).scope().vm.formData.ageProofFile = this.files[0]" />
                                </fieldset>
                                <fieldset>
                                    <legend>Income Proof Details</legend>
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Document Category</label>
                                        <md-select data-ng-model="vm.formData.incomeProof">
                                            <md-option ng-repeat="item in vm.IncomeProof" value="{{item.value}}">{{item.value}}</md-option>
                                        </md-select>
                                    </md-input-container>
                                    <input id="patientReg-incomeProof" type="file" aria-label="incomeProof" ng-disabled="!vm.formData.incomeProof" onchange="angular.element(this).scope().vm.formData.incomeProofFile = this.files[0]" />
                                </fieldset>
                            </md-content>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row supportingOrg">
                <div class="col-sm-12">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            Supporting Organisations
                            <i class="fa fa-plus-square" aria-hidden="true" ng-if="vm.formData.supportFromOther" ng-click="vm.formData.organisation.push({});"></i>
                            <i class="fa fa-minus-square" aria-hidden="true" ng-show="vm.formData.supportFromOther && vm.formData.organisation.length > 1" ng-click="vm.formData.organisation.pop();"></i>
                        </div>
                        <div class="panel-body">
                            <md-input-container class="md-icon-float md-block" style="margin-bottom: 0px;">
                                <md-checkbox ng-click="vm.clearOrg();" data-ng-model="vm.formData.supportFromOther">
                                    Is the Patient Receiving Support from Other organisations?
                                </md-checkbox>
                            </md-input-container>
                            <div class="col-md-4 col-sm-12 repeatingDiv" ng-if="vm.formData.supportFromOther" ng-repeat="org in vm.formData.organisation">
                                <md-content class="autoScroll">
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Organisation Name</label>
                                        <md-icon class="fa fa-chevron-right"></md-icon>
                                        <input type="text" name="organisationName" data-ng-model="org.name" ng-required="true" maxlength="100" />
                                    </md-input-container>
                                    <md-input-container class="md-icon-float md-block">
                                        <label>Amount received</label>
                                        <md-icon class="fa fa-dollar"></md-icon>
                                        <input type="text" name="amountRec" data-ng-model="org.amountRec" ng-required="true" maxlength="10" />
                                    </md-input-container>
                                </md-content>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            Preliminary Examination
                        </div>
                        <div class="panel-body">
                            <div class="col-xs-12" style="padding-left: 0px;">
                                <md-checkbox data-ng-model="vm.donePrelimChck" ng-change="vm.formData.hospitalId = null;vm.formData.doctorId = null">
                                    Has the patient completed priliminary examination?
                                </md-checkbox>
                            </div>
                            <div class="col-md-4 col-xs-12" ng-hide="vm.donePrelimChck" style="padding-left: 0px;">
                                <md-input-container class="md-icon-float md-block">
                                    <label>Select Hospital</label>
                                    <md-select data-ng-model="vm.formData.preliminaryExamHospitalId" ng-change="vm.onHospitalChange();">
                                        <md-option ng-repeat="item in vm.hospitalList" value="{{item.hospitalId}}">{{item.name}}</md-option>
                                    </md-select>
                                </md-input-container>
                            </div>
                            <div class="col-md-4 col-xs-12" ng-hide="vm.donePrelimChck" style="padding-left: 0px;">
                                <md-input-container class="md-icon-float md-block">
                                    <label>Select Doctor</label>
                                    <md-select data-ng-model="vm.formData.preliminaryExamDoctorId" ng-disabled="!vm.formData.preliminaryExamHospitalId">
                                        <md-option ng-repeat="item in vm.doctorList" value="{{item.id}}">{{item.name}}</md-option>
                                    </md-select>
                                </md-input-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <md-button class="md-raised md-primary" type="submit">Register <i class="fa fa-angle-double-right"></i></md-button>
                <md-button class="md-raised" type="reset">Clear <i class="fa fa-trash-o"></i></md-button>
            </div>
        </form>
    </div>
</div>